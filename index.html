<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Lootcontainer-Simulator</title>
  <script>
    (function() {
      function inject(ver) {
        try {
          var v = ver ? ('?v=' + encodeURIComponent(ver)) : '';
          var link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = 'style.css' + v;
          document.head.appendChild(link);

          var s = document.createElement('script');
          s.src = 'script.js' + v;
          s.defer = true;
          document.head.appendChild(s);
        } catch (e) {
          // Fallback (sollte selten nÃ¶tig sein)
          var link2 = document.createElement('link');
          link2.rel = 'stylesheet';
          link2.href = 'style.css';
          document.head.appendChild(link2);
          var s2 = document.createElement('script');
          s2.src = 'script.js';
          s2.defer = true;
          document.head.appendChild(s2);
        }
      }
      try {
        fetch('version.json', { cache: 'no-store' })
          .then(function(r){ return r.ok ? r.json() : { version: null }; })
          .then(function(meta){ inject(meta && (meta.version || meta.appVersion)); })
          .catch(function(){ inject(null); });
      } catch (e) { inject(null); }
    })();
  </script>
</head>
<body>
  <h1>Lootingsimulat<span id="secretDevSwitch" class="secret-dev-switch" title=" ">o</span>r <span class="app-version-inline" aria-label="Version">v0.9</span></h1>
  
  <p id="balance">ğŸ’°: 0</p>


  <!-- NEU: Alles in einem Wrapper -->

  <div id="containerArea">
    <div id="playRow">
      <div id="containerWrapper">
        <div id="overlay"></div>
        <div id="lootContainer" class="container-grid"></div>
      </div>
      <div id="searchAnim" aria-hidden="true">
        <div class="ground" aria-hidden="true"></div>
        <div class="character idle" role="img" aria-label="Suchender">
          <div class="head"></div>
          <div class="body"></div>
          <div class="arm left"></div>
          <div class="arm right"></div>
          <div class="leg left"></div>
          <div class="leg right"></div>
        </div>
        <div class="chest" aria-hidden="true">
          <div class="chest-body"></div>
          <div class="chest-lid"></div>
        </div>
      </div>
    </div>
    <!-- Box-Auswahl unter dem Lootcontainer und Ã¼ber dem Open-Button -->
    <div id="boxSelectionWrapper">
      <div id="boxSelection">
        <button id="boxBtn1" data-box="Box#1">ğŸ—„ï¸ Schublade (Free)</button>
        <button id="boxBtn2" data-box="Box#2">ğŸ’ Sporttasche (1K ğŸ’°)</button>
        <button id="boxBtn3" data-box="Box#3">ğŸ’¼ Koffer (10K ğŸ’°)</button>
        <button id="boxBtn4" data-box="Box#4">ğŸ“¦ Holzkiste (100K ğŸ’°)</button>
        <button id="boxBtn5" data-box="Box#5">ğŸ–ï¸ MilitÃ¤rkoffer (250K ğŸ’°)</button>
        <button id="boxBtn6" data-box="Box#6">ğŸ”’ Safe (500K ğŸ’°)</button>
        <button id="boxBtn7" data-box="Box#7">ğŸ¦ Tresor (1M ğŸ’°)</button>
        <button id="boxBtn8" data-box="Testbox">ğŸ§ª Testbox (DEV)</button>
      </div>
      <div id="iconButtons">
        <button id="statsBtn" title="Statistiken">ğŸ“Š</button>
        <button id="collectionBtn" title="Sammlung">ğŸ“š</button>
        <button id="devMoneyBtn" title="DEV: +1M ğŸ’°">ğŸ’¸</button>
      </div>
        <div id="devToggleWrapper">
          <label class="toggle-dev">
            <input type="checkbox" id="toggleDev">
            DEV anzeigen
          </label>
        </div>
    </div>
    <div id="actionButtons">
      <button id="shopBtn">ğŸª™ Shop</button>
      <button id="openBtn">Ã–ffnen ğŸ”‘</button>
    </div>
  </div>

<!-- Level & XP Display -->
<div id="levelDisplay">
  <div id="levelInfo">
    <span id="playerLevel">Level 1</span>
    <span id="playerTitle">AnfÃ¤nger</span>
  </div>
  <div id="xpBarContainer">
    <div id="xpBar"></div>
    <span id="xpText">0 / 500 XP</span>
  </div>
  <button id="skillsBtn">âš¡ Skills (<span id="skillPointsDisplay">0</span>)</button>
</div>

<!-- Skill Tree Modal -->
<div id="skillModal" style="display:none;" class="overlay">
  <div class="modal-content skill-modal">
    <button id="closeSkillBtn" class="close-btn">âŒ</button>
    <h2>âš¡ Skill-Tree</h2>
    <p class="skill-points">VerfÃ¼gbare Punkte: <span id="availablePoints">0</span></p>
    
    <div class="skill-tree">
      <div class="skill-branch">
        <h3>ğŸ’° Wohlstand</h3>
        <p class="skill-description">ErhÃ¶ht Item-Werte<br>+5% pro Punkt</p>
        <div class="skill-level">
          <span id="wohlstandLevel">0</span> / 20
        </div>
        <button id="upgradeWohlstand" class="upgrade-btn">Upgrade</button>
      </div>
      
      <div class="skill-branch">
        <h3>ğŸ€ GlÃ¼ck</h3>
        <p class="skill-description">ErhÃ¶ht Rarity-Chancen<br>Bessere Drop-Verteilung</p>
        <div class="skill-level">
          <span id="glueckLevel">0</span> / 20
        </div>
        <button id="upgradeGlueck" class="upgrade-btn">Upgrade</button>
      </div>
      
      <div class="skill-branch">
        <h3>âš¡ Tempo</h3>
        <p class="skill-description">Schnellere Untersuchung<br>-5% Zeit pro Punkt</p>
        <div class="skill-level">
          <span id="effizienzLevel">0</span> / 10
        </div>
        <button id="upgradeEffizienz" class="upgrade-btn">Upgrade</button>
      </div>
    </div>
  </div>
</div>

<!-- Shop Modal -->
<div id="shopModal" style="display:none;" class="overlay">
  <div class="modal-content skill-modal">
    <button id="closeShopBtn" class="close-btn">âŒ</button>
    <h2>ğŸª™ Shop</h2>
    <p class="skill-points">Guthaben: <span id="shopBalance">0</span> ğŸ’°</p>
    
    <div id="shopContent">
      <!-- Shop-Items werden hier dynamisch eingefÃ¼gt -->
    </div>
  </div>
</div>

<!-- Stats Overlay -->
<div id="statsOverlay" style="display:none;" class="overlay">
  <button id="closeStatsBtn">âŒ</button>
  <h2>ğŸ“Š Statistiken</h2>
  <div id="statsContent"></div>
</div>

<div id="collectionOverlay" style="display:none;" class="overlay">
  <button id="closeCollectionBtn">âŒ</button>
  <div id="collectionGrid" class="grid"></div>
  <button id="resetBtn" class="reset-btn">ğŸ”„ Fortschritt zurÃ¼cksetzen</button>
</div>

  
</body>
</html>
