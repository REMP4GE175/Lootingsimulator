<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Lootcontainer-Simulator</title>
  
  <!-- Firebase SDK -->
  <script type="module" src="firebase.js"></script>
  
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5630142729480606"
       crossorigin="anonymous"></script>
  
  <script>
    (function() {
      function inject(ver) {
        try {
          var v = ver ? ('?v=' + encodeURIComponent(ver)) : '';
          var link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = 'style.css' + v;
          document.head.appendChild(link);

          var s = document.createElement('script');
          s.src = 'script.min.js' + v;
          s.defer = true;
          document.head.appendChild(s);
        } catch (e) {
          // Fallback (sollte selten nÃ¶tig sein)
          var link2 = document.createElement('link');
          link2.rel = 'stylesheet';
          link2.href = 'style.css';
          document.head.appendChild(link2);
          var s2 = document.createElement('script');
          s2.src = 'script.min.js';
          s2.defer = true;
          document.head.appendChild(s2);
        }
      }
      try {
        fetch('version.json', { cache: 'no-store' })
          .then(function(r){ return r.ok ? r.json() : { version: null }; })
          .then(function(meta){ inject(meta && (meta.version || meta.appVersion)); })
          .catch(function(){ inject(null); });
      } catch (e) { inject(null); }
    })();
  </script>
</head>
<body>
  <!-- Ad + Content Wrapper -->
  <div id="pageWrapper">
    <!-- Left Ad Column -->
    <aside class="ad-column ad-left">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-5630142729480606"
           data-ad-slot="LINKE_SLOT_ID"
           data-ad-format="vertical"
           data-full-width-responsive="false"></ins>
      <script>
           (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </aside>

    <!-- Main Content -->
    <main id="mainContent">
      <img src="Logo's/Logo.png" alt="Looting Simulator" id="gameLogo">
      <br>
      
      <div id="gameWrapper">
        <p id="balance">ğŸ’°: 0</p>

  <!-- Sound Control -->
  <div id="soundControl">
    <button id="soundBtn" class="sound-btn" title="Sound an/aus">ğŸ”Š</button>
    <div id="volumeSlider" class="volume-slider" style="display:none;">
      <input type="range" id="volumeRange" min="0" max="100" value="50">
      <span id="volumePercent">50%</span>
    </div>
  </div>

  <!-- NEU: Alles in einem Wrapper -->

  <div id="containerArea">
    <div id="playRow">
      <div id="containerWrapper">
        <div id="overlay"></div>
        <div id="lootContainer" class="container-grid"></div>
      </div>
    </div>
    <!-- Box-Auswahl unter dem Lootcontainer und Ã¼ber dem Open-Button -->
    <div id="boxSelectionWrapper">
      <div id="boxSelection">
  <button id="boxBtn1" data-box="Box#1">Schublade<br><small>(Free)</small></button>
  <button id="boxBtn2" data-box="Box#2">Sporttasche<br><small>(1K ğŸ’°)</small></button>
  <button id="boxBtn3" data-box="Box#3">Koffer<br><small>(10K ğŸ’°)</small></button>
  <button id="boxBtn4" data-box="Box#4">Holzkiste<br><small>(100K ğŸ’°)</small></button>
  <button id="boxBtn5" data-box="Box#5">MilitÃ¤rkoffer<br><small>(250K ğŸ’°)</small></button>
  <button id="boxBtn6" data-box="Box#6">Safe<br><small>(500K ğŸ’°)</small></button>
  <button id="boxBtn7" data-box="Box#7">Tresor<br><small>(1M ğŸ’°)</small></button>
      </div>
      <div id="iconButtons">
        <button id="statsBtn" title="Statistiken">ğŸ“Š</button>
        <button id="collectionBtn" title="Sammlung">ğŸ“š</button>
        <button id="leaderboardBtn" title="Leaderboard">ğŸ†</button>
        <button id="backgroundBtn" title="Hintergrund">ğŸ¨</button>
        <button id="accountBtn" title="Account">ğŸ‘¤</button>
      </div>
    </div>
    <div id="actionButtons">
      <button id="shopBtn">ğŸª™ Shop</button>
      <div id="openBtnWrapper">
        <button id="openBtn">Ã–ffnen ğŸ”‘</button>
        <button id="autoClickerToggle" style="display:none;" title="Auto-Ã–ffner an/aus">
          ğŸ¤– <span id="autoClickerStatus">AUS</span>
        </button>
      </div>
    </div>
  </div>

<!-- Level & XP Display -->
<div id="levelDisplay">
  <div id="levelInfo">
    <span id="levelLeft"><span id="playerLevel">Level 1</span></span>
    <span id="playerTitle">AnfÃ¤nger</span>
  </div>
  <div id="xpBarContainer">
    <div id="xpBar"></div>
    <span id="xpText">0 / 500 XP</span>
  </div>
  <div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
    <button id="skillsBtn">âš¡ Skills (<span id="skillPointsDisplay">0</span>)</button>
    <button id="prestigeBtn" title="Meta-Boni & Reset" aria-label="Meta-Boni & Reset">
      <span class="prestige-star" title="Prestige-Stufe">
        <span class="star">â­</span>
        <span class="num">0</span>
      </span>
    </button>
  </div>
</div>

<!-- Leaderboard Display (inline, not modal) -->
<div id="leaderboardDisplay" style="display:none; margin-top:20px;">
  <h3 style="text-align:center;">ğŸ† Leaderboard</h3>
  <div style="margin-bottom: 16px; text-align:center;">
    <input type="text" id="displayNameInput" placeholder="Dein Name (optional)" maxlength="20" style="padding:8px; border-radius:4px; border:1px solid #ccc; width:200px;">
    <button id="saveNameBtn" class="upgrade-btn" style="margin-left:8px;">Namen speichern</button>
  </div>
  <div id="leaderboardContent" style="max-height:400px; overflow-y:auto; background:rgba(0,0,0,0.3); border-radius:8px; padding:10px;">
    <p style="text-align:center;">Lade Leaderboard...</p>
  </div>
</div>

</div>
      </div> <!-- End gameWrapper -->
    </main>

<!-- Skill Tree Modal -->
<div id="skillModal" style="display:none;" class="overlay">
  <div class="modal-content skill-modal">
    <button id="closeSkillBtn" class="close-btn">âŒ</button>
    <h2>âš¡ Skill-Tree</h2>
    <p class="skill-points">VerfÃ¼gbare Punkte: <span id="availablePoints">0</span></p>
    
    <div class="skill-tree">
      <div class="skill-branch">
        <h3>ğŸ’° Wohlstand</h3>
        <p class="skill-description">ErhÃ¶ht Item-Werte<br>+5% pro Punkt</p>
        <div class="skill-level">
          <span id="wohlstandLevel">0</span> / 20
        </div>
        <button id="upgradeWohlstand" class="upgrade-btn">Upgrade</button>
      </div>
      
      <div class="skill-branch">
  <h3>ğŸ€ GlÃ¼ck</h3>
  <p class="skill-description">ErhÃ¶ht Rarity-Chancen und die Anzahl der Items<br>Bessere Drop-Verteilung</p>
        <div class="skill-level">
          <span id="glueckLevel">0</span> / 20
        </div>
        <button id="upgradeGlueck" class="upgrade-btn">Upgrade</button>
      </div>
      
      <div class="skill-branch">
        <h3>âš¡ Tempo</h3>
        <p class="skill-description">Schnellere Untersuchung<br>-3.5% Zeit pro Punkt</p>
        <div class="skill-level">
          <span id="effizienzLevel">0</span> / 10
        </div>
        <button id="upgradeEffizienz" class="upgrade-btn">Upgrade</button>
      </div>
    </div>
  </div>
</div>

<!-- Shop Modal -->
<div id="shopModal" style="display:none;" class="overlay">
  <div class="modal-content skill-modal">
    <button id="closeShopBtn" class="close-btn">âŒ</button>
    <h2>ğŸª™ Shop</h2>
    <p class="skill-points">Guthaben: <span id="shopBalance">0</span> ğŸ’°</p>
    
    <div id="shopContent">
      <!-- Shop-Items werden hier dynamisch eingefÃ¼gt -->
    </div>
  </div>
</div>

<!-- Stats Overlay -->
<div id="statsOverlay" style="display:none;" class="overlay">
  <button id="closeStatsBtn">âŒ</button>
  <h2>ğŸ“Š Statistiken</h2>
  <div id="statsContent"></div>
  <button id="resetBtn" class="reset-btn">ğŸ”„ Fortschritt zurÃ¼cksetzen</button>
</div>

<div id="collectionOverlay" style="display:none;" class="overlay">
  <button id="closeCollectionBtn">âŒ</button>
  <div id="collectionGrid" class="grid"></div>
</div>

<!-- Account Linking Modal -->
<div id="accountModal" style="display:none;" class="overlay">
  <div class="modal-content info-content">
    <button id="closeAccountBtn" class="close-btn">âŒ</button>
    <h2>ğŸ‘¤ Account</h2>
    <div id="accountInfo" style="text-align:left; line-height:1.8; padding:20px; max-height:70vh; overflow-y:auto;">
      <div id="accountStatus"></div>
      <div id="accountActions" style="margin-top:20px;"></div>
    </div>
  </div>
</div>

<!-- Prestige Modal -->
<div id="prestigeModal" style="display:none;" class="overlay">
  <div class="modal-content skill-modal">
    <button id="closePrestigeBtn" class="close-btn">âŒ</button>
    <h2>âœ¨ Prestige</h2>
    <div id="prestigeInfo" style="text-align:left; line-height:1.6;">
      <!-- Inhalte werden per JS gesetzt -->
    </div>
    <div style="display:flex; gap:10px; justify-content:center; margin-top:16px;">
      <button id="confirmPrestigeBtn" class="upgrade-btn">Jetzt prestigen</button>
    </div>
  </div>
</div>

<!-- Leaderboard Modal -->
<!-- Leaderboard Modal (kept for backwards compatibility but hidden) -->
<div id="leaderboardModal" style="display:none;" class="overlay">
  <div class="modal-content skill-modal" style="display:none;">
    <button id="closeLeaderboardBtn" class="close-btn">âŒ</button>
    <h2>ğŸ† Leaderboard</h2>
  </div>
</div>
    </main>

    <!-- Right Ad Column -->
    <aside class="ad-column ad-right">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-5630142729480606"
           data-ad-slot="RECHTE_SLOT_ID"
           data-ad-format="vertical"
           data-full-width-responsive="false"></ins>
      <script>
           (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </aside>
  </div>

  
</body>
</html>