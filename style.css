body {
  font-family: sans-serif;
  text-align: center;
  background-color: #1e1e1e;
  color: white;
}

/* Kleine Inline-Versionsanzeige im Titel */
.app-version-inline {
  font-size: 0.45em;
  color: #bdbdbd;
  font-weight: normal;
  margin-left: 0.5rem;
  line-height: 1;
  vertical-align: baseline;
}
/* Stats Overlay: gleiche Optik wie Sammlung/Achievements */
#statsOverlay {
  position: fixed;
  top: 10%;
  left: 10%;
  width: 80%;
  height: 80%;
  background: rgba(0, 0, 0, 0.95);
  color: white;
  overflow-y: auto;
  padding: 20px;
  z-index: 5000;
  display: none;
}

/* Play row: loot grid left, character/chest animation right */
#playRow {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 20px;
}

#containerWrapper {
  position: relative;
  display: inline-block;
  margin: 0; /* entferne auto-margin */
}

#lootContainer {
  /* Loot-Grid bleibt zentriert */
  flex-shrink: 0;
}

#openBtn {
  transition: all 0.3s ease;
  cursor: pointer;
  font-size: 24px;
  padding: 15px 40px;
  font-weight: bold;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: 3px solid #9f7aea;
  border-radius: 12px;
  color: white;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4),
              inset 0 -3px 10px rgba(0,0,0,0.2);
  position: relative;
  overflow: hidden;
}

/* Inline-Icon direkt hinter dem Text "Öffnen" */
#openBtn .open-btn-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-left: 8px;
  font-size: 22px; /* für Emoji-Icons (Boxen) */
  line-height: 1;
}
#openBtn .open-btn-icon img {
  width: 22px;
  height: 22px;
  object-fit: contain;
}
/* Key-Mode: PNG mit raritätsfarbener Kachel, leicht nach unten versetzt */
#openBtn .open-btn-icon.key-mode {
  padding: 2px 3px;
  border-radius: 6px;
  transform: translateY(2px);
  box-shadow: 0 2px 6px rgba(0,0,0,0.25);
}

/* Ausgegrauter Schlüssel, wenn im KeyRoom keine passenden Schlüssel mehr vorhanden sind */
#openBtn .open-btn-icon.key-mode.disabled {
  filter: grayscale(100%);
  opacity: 0.6;
  background: #555 !important;
  box-shadow: none;
}

/* Indikator wenn nächste Öffnung mit Schlüssel erfolgt */
#openBtn .open-key-indicator {
  position: absolute;
  top: -8px;
  right: -8px;
  background: rgba(0,0,0,0.6); /* überschrieben via inline backgroundColor */
  border: 2px solid #f1c40f; /* überschrieben via inline borderColor */
  border-radius: 999px;
  padding: 2px 6px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
}
#openBtn .open-key-indicator img {
  width: 18px;
  height: 18px;
  object-fit: contain;
}

/* Buttonzeile für Shop (links), Öffnen (Mitte) und Schlüssel (rechts) */
#actionButtons {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 10px;
}

/* Linke Seite: Shop + Quickslots */
#leftActions { grid-column: 1; justify-self: end; display: inline-flex; align-items: center; gap: 8px; }
#shopBtn { /* Falls kein Wrapper existiert (vor Quickslots), weiterhin links platzieren */ grid-column: 1; justify-self: end; }

/* Mitte: Öffnen-Button */
#openBtn {
  grid-column: 2;
  justify-self: center;
}

/* Rechte Seite: Schlüssel-Button */
#keysBtn {
  grid-column: 3;
  justify-self: start;
  position: relative; /* für den Benachrichtigungspunkt oben rechts */
}

/* Kleiner Pfeil rechts im Schlüssel-Button zum Auf-/Zuklappen */
#keysBtn .keys-toggle-arrow {
  display: inline-block;
  margin-left: 8px;
  font-size: 16px;
  opacity: 0.85;
}
#keysBtn .keys-toggle-arrow:hover {
  opacity: 1;
}

/* Roter Benachrichtigungspunkt am Schlüssel-Button (oben rechts) */
#keysBtn .keys-notify-dot {
  position: absolute;
  top: -6px;
  right: -6px;
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: #e74c3c;
  box-shadow: 0 0 10px rgba(231,76,60,0.7), 0 0 20px rgba(231,76,60,0.35);
  border: 2px solid rgba(0,0,0,0.6);
  pointer-events: none;
}

/* Quickslots (Trankgürtel) neben dem Shop-Button */
.quickslots {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

/* (Entfernt) Dropdown-Schlüsselvorschau – ersetzt durch ein-/ausklappbare Badges im Button */
.quickslot-btn {
  position: relative;
  width: 36px;
  height: 36px;
  border-radius: 8px;
  border: 2px solid #666;
  background: rgba(255,255,255,0.06);
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  cursor: pointer;
}
.quickslot-btn .potion-icon { width: 26px; height: 26px; }
.quickslot-btn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}
.quickslot-btn:hover:not(:disabled) {
  background: rgba(255,255,255,0.12);
  border-color: #888;
}
.quickslot-badge {
  position: absolute;
  top: -6px;
  right: -6px;
  background: #2ecc71;
  color: #111;
  border: 2px solid #0e5429;
  border-radius: 999px;
  font-size: 12px;
  line-height: 1;
  padding: 2px 6px;
  min-width: 18px;
  text-align: center;
}

/* Trank-Icon (SVG-basiert, skalierbar) */
.potion-icon {
  position: relative;
  width: 22px;
  height: 22px;
  display: inline-block;
  vertical-align: middle;
}
.potion-icon svg { width: 100%; height: 100%; display: block; }

#shopBtn {
  transition: all 0.3s ease;
  cursor: pointer;
  font-size: 18px; /* etwas kleiner als Öffnen */
  padding: 10px 24px; /* kompaktere Abmessungen */
  font-weight: bold;
  background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
  border: 3px solid #f1c40f;
  border-radius: 10px;
  color: white;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
  box-shadow: 0 4px 15px rgba(243, 156, 18, 0.4),
              inset 0 -3px 10px rgba(0,0,0,0.2);
  position: relative;
  overflow: hidden;
}

/* Shine-Effekt auf Buttons entfernt (Performance) */

#openBtn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6),
              inset 0 -3px 10px rgba(0,0,0,0.2);
  border-color: #b794f6;
}

#shopBtn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(243, 156, 18, 0.6),
              inset 0 -3px 10px rgba(0,0,0,0.2);
  border-color: #f39c12;
}

#openBtn:active {
  transform: translateY(0);
  box-shadow: 0 2px 10px rgba(102, 126, 234, 0.4),
              inset 0 -3px 10px rgba(0,0,0,0.2);
}

#shopBtn:active {
  transform: translateY(0);
  box-shadow: 0 2px 10px rgba(243, 156, 18, 0.4),
              inset 0 -3px 10px rgba(0,0,0,0.2);
}

#openBtn:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.container-grid {
  display: grid;
  border: 0.5px solid #888;
}

.slot {
  position: relative;
  width: 100%; /* füllt die Grid-Zelle, Größe wird per JS über gridTemplate gesetzt */
  height: 100%;
  background-color: #222;
  border: 1px solid #555;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2050; /* Basisebene für Slots - sollte über dem Overlay liegen */
}

.item {
  width: 90%;
  height: 90%;
  /* Default: kein spezieller Hintergrund hier - Vorabzustand wird per Klasse gesteuert */
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  cursor: pointer;
  transition: background-color 0.3s ease;
  position: relative;
  z-index: 2051; /* Items liegen über Slots */
}

/* Vorabzustand: gestreiftes Feld (wie das große Overlay) für die Slots,
   die später ein Item erhalten sollen. 45° Streifen, gleiche Farben.
   Diese Klasse wird nur auf die ersten N Slots gesetzt, bevor aufgedeckt wird. */
.item.pre-reveal {
  background: repeating-linear-gradient(
    45deg,
    #666 0px,
    #666 10px,
    #444 10px,
    #444 20px
  );
  border: 2px solid #888;
}

.item.revealed {
  font-weight: bold;
  color: black;
  border: 2px solid black;
}

.lupe {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 60px;
  color: rgba(255, 255, 255, 0.8);
  pointer-events: none;
  z-index: 2052; /* Lupe über Items/Slots */
}

#overlay {
  position: absolute;
  top: 0;
  left: 0;
  /* Deutliche graue Box über den Slots während des Öffnens */
  background: repeating-linear-gradient(
    45deg,
    #666 0px,
    #666 10px,
    #444 10px,
    #444 20px
  );
  background-color: rgba(70,70,70,0.9); /* fallback/solid color für bessere Sichtbarkeit */
  border: 2px solid #888;
  z-index: 2500; /* Overlay über Slots, aber unter floating layer (3000) */
  display: none;
  pointer-events: none;
}

/* Sammlung Overlay */
#collectionOverlay {
  position: fixed;
  top: 10%;
  left: 10%;
  width: 80%;
  height: 80%;
  background: rgba(0, 0, 0, 0.95);
  color: white;
  overflow-y: auto;
  padding: 20px;
  z-index: 5000; /* Über allen anderen Elementen */
  display: none;
}
#statsOverlay h2 {
  text-align: center;
  margin-bottom: 30px;
  font-size: 32px;
  color: #3498db;
}

#statsContent {
  max-width: 800px;
  margin: 0 auto;
}

/* Achievements Overlay: gleiche Optik wie Stats */
#achievementsOverlay {
  position: fixed;
  top: 10%;
  left: 10%;
  width: 80%;
  height: 80%;
  background: rgba(0, 0, 0, 0.95);
  color: white;
  overflow-y: auto;
  padding: 20px;
  z-index: 5000;
  display: none;
}

#achievementsOverlay h2 {
  text-align: center;
  margin-bottom: 30px;
  font-size: 32px;
  color: #f1c40f;
}

#achievementsContent {
  max-width: 800px;
  margin: 0 auto;
}

.stats-section {
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 10px;
  padding: 20px;
  margin-bottom: 20px;
}

.stats-section h3 {
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 24px;
  color: #f39c12;
}

/* Achievements: einklappbare Sektionen */
.ach-section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  user-select: none;
}
.ach-section-header .ach-toggle {
  background: transparent;
  border: none;
  color: #f39c12;
  font-size: 20px;
  cursor: pointer;
  padding: 0 4px;
}
.ach-section-body { margin-top: 8px; }
/* Prozentanzeige rechts im Header */
.ach-section-header .ach-percent {
  margin-left: auto;
  color: #bdc3c7;
  font-weight: 700;
}

.stat-item {
  display: flex;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}

.stat-item:last-child {
  border-bottom: none;
}

.stat-label {
  font-size: 16px;
  color: #bdc3c7;
}

.stat-value {
  font-size: 18px;
  font-weight: bold;
  color: #ecf0f1;
}

.progress-bar-container {
  width: 100%;
  height: 30px;
  background: rgba(0,0,0,0.3);
  border-radius: 15px;
  overflow: hidden;
  margin-top: 10px;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #3498db 0%, #2ecc71 100%);
  transition: width 0.5s ease;
  border-radius: 15px;
}

#closeStatsBtn,
#closeAchievementsBtn {
  position: absolute;
  top: 10px;
  right: 20px;
  z-index: 1100;
  background-color: #444;
  color: white;
  border: none;
  padding: 8px 12px;
  font-size: 14px;
  cursor: pointer;
  border-radius: 4px;
  transition: background-color 0.2s ease;
}

#closeStatsBtn:hover,
#closeAchievementsBtn:hover {
  background-color: #666;
}

/* Benachrichtigungspunkt am Achievements-Button */
#achievementsBtn { position: relative; }
#achievementsBtn .ach-notify-dot {
  position: absolute;
  top: -6px;
  right: -6px;
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: #e74c3c;
  box-shadow: 0 0 10px rgba(231,76,60,0.7), 0 0 20px rgba(231,76,60,0.35);
  border: 2px solid rgba(0,0,0,0.6);
  pointer-events: none;
}

#collectionGrid {
  display: flex;
  flex-direction: column;
  gap: 30px;
  align-items: flex-start;
}

.rarity-section {
  width: 100%;
}

.rarity-section h2 {
  font-size: 18px;
  margin-bottom: 10px;
  border-bottom: 1px solid #555;
  padding-bottom: 5px;
  text-align: left;
  color: white;
}

.rarity-section .grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 10px;
  justify-items: center;
}

.rarity-section .item {
  width: 100px;
  height: 100px;
  background-color: #222;
  border: 1px solid #555;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  text-align: center;
  position: relative;
  z-index: 2;
}

.rarity-section .item img {
  width: 64px;
  height: 64px;
  object-fit: contain;
}

/* Loot-Grid Icons (icons shown while revealing) */
#lootContainer .item img {
  width: 70%;
  height: 70%;
  max-width: 72px;
  max-height: 72px;
  object-fit: contain;
}

.rarity-section img.locked {
  filter: brightness(0) !important;
  opacity: 1;
}

/* Transparente Farben für Raritäten */
.rarity-Common {
  background-color: rgba(204, 204, 204, 0.6);
}
.rarity-Rare {
  background-color: rgba(74, 144, 226, 0.6);
}
.rarity-Epic {
  background-color: rgba(155, 89, 182, 0.6);
}
.rarity-Legendary {
  background-color: rgba(241, 196, 15, 0.6);
}
.rarity-Mythisch {
  background-color: rgba(231, 76, 60, 0.6);
}

/* Glow-Animation (wieder eingeführt, intensität wird per CSS-Variable --glow-opacity
   gesteuert; pro Rarität werden RGB-Werte in --glow-r/g/b gesetzt.) */
@keyframes glowPulse {
  0% {
    box-shadow: 0 0 10px rgba(var(--glow-r,255), var(--glow-g,255), var(--glow-b,255), var(--glow-opacity,0.4));
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 30px rgba(var(--glow-r,255), var(--glow-g,255), var(--glow-b,255), var(--glow-opacity,0.8)), 0 0 60px rgba(var(--glow-r,255), var(--glow-g,255), var(--glow-b,255), calc(var(--glow-opacity,0.4) * 0.9));
    transform: scale(1.05);
  }
  100% {
    box-shadow: 0 0 10px rgba(var(--glow-r,255), var(--glow-g,255), var(--glow-b,255), var(--glow-opacity,0.4));
    transform: scale(1);
  }
}

.glow-base {
  animation: glowPulse 1.5s ease-out infinite;
  z-index: 2500;
  position: relative;
  pointer-events: none;
}

/* Rarity-specific RGB values (used by the glow). Opacity is set inline by JS via --glow-opacity. */
.glow-Common { --glow-r: 204; --glow-g: 204; --glow-b: 204; }
.glow-Rare   { --glow-r: 74;  --glow-g: 144; --glow-b: 226; }
.glow-Epic   { --glow-r: 155; --glow-g: 89;  --glow-b: 182; }
.glow-Legendary { --glow-r: 241; --glow-g: 196; --glow-b: 15; }
.glow-Mythisch  { --glow-r: 231; --glow-g: 76;  --glow-b: 60; }

/* Hervorhebung für neu entdeckte Items (subtil, ohne animierten Glow) */
.newly-discovered {
  outline: 3px solid rgba(255,255,255,0.04);
}

/* Subtiles Hervorheben für Items aus der letzten Öffnung (kein Glow) */
.last-pulled {
  box-shadow: 0 0 10px rgba(255,255,255,0.03) inset;
  border: 1px solid rgba(255,255,255,0.04);
}

.floating-lupe {
  position: absolute; /* Angepasst für Slot-relative Positionierung */
  transform: translate(-50%, -50%);
  font-size: 42px; /* 30% kleiner (von 60px auf 42px) */
  pointer-events: none;
  z-index: 2600; /* Über Overlay (2500) */
  color: rgba(255,255,255,0.95);
}

/* Badge für Anzahl wie oft ein Item gesammelt wurde */
.item-count-badge {
  position: absolute;
  top: 6px;
  right: 6px;
  background: rgba(0,0,0,0.7);
  color: white;
  padding: 2px 6px;
  font-size: 12px;
  border-radius: 12px;
  box-shadow: 0 0 6px rgba(0,0,0,0.6);
}

/* custom tooltip removed */
/* ======= Custom Loot Tooltip ======= */
.loot-tooltip {
  position: fixed;
  z-index: 9999;
  pointer-events: none;
  display: none;
  background: rgba(15,15,15,0.98);
  color: #f0f0f0;
  border: 1px solid #444;
  border-left: 4px solid var(--tip-accent, #888);
  padding: 10px 12px;
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.6);
  min-width: 180px;
  max-width: 320px;
}

.loot-tooltip .tip-name {
  font-weight: 700;
  font-size: 14px;
  margin-bottom: 4px;
}

.loot-tooltip .tip-rarity {
  display: inline-block;
  align-self: flex-start;
  background: var(--tip-accent, #888);
  color: #111;
  font-weight: 700;
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 999px;
  margin: 2px 0 8px 0;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4);
}

.loot-tooltip .tip-value {
  font-weight: 600;
  color: #f1c40f;
  margin-bottom: 6px;
}

.loot-tooltip .tip-desc {
  font-size: 12px;
  color: #d0d0d0;
  line-height: 1.4;
}

/* Zitatdarstellung im Tooltip */
.loot-tooltip .tip-quote {
  margin: 6px 0 0 0;
  padding-left: 10px;
  border-left: 3px solid var(--tip-accent, #888);
  color: #e0e0e0;
  font-style: italic;
}
.loot-tooltip .tip-quote p {
  margin: 0;
  font-size: 12px;
  line-height: 1.4;
}
.loot-tooltip .tip-quote-author {
  display: block;
  margin-top: 6px;
  color: #aaaaaa;
  font-size: 11px;
  text-align: right;
}

#closeCollectionBtn {
  position: absolute;
  top: 10px;
  right: 20px;
  z-index: 1100;
  background-color: #444;
  color: white;
  border: none;
  padding: 8px 12px;
  font-size: 14px;
  cursor: pointer;
  border-radius: 4px;
  transition: background-color 0.2s ease;
}

#closeCollectionBtn:hover {
  background-color: #666;
}

/* Info-Button und Modal */
.box-info-btn {
  font-size: 24px;
  padding: 10px 15px;
  cursor: pointer;
  background: rgba(255,255,255,0.02);
  border: 2px solid #666;
  color: white;
  border-radius: 8px;
  transition: all 0.2s ease;
  min-width: 50px;
  z-index: 4100; /* über Sammlung */
}
.box-info-btn:hover {
  background: rgba(255,255,255,0.08);
  border-color: #888;
  transform: scale(1.05);
}

/* Schlüssel-Button: kleine Raritäts-Badges im Button anzeigen */
.key-badges {
  display: inline-flex;
  gap: 4px;
  margin-left: 6px;
  vertical-align: middle;
}
.key-badge {
  font-size: 11px;
  line-height: 1;
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,0.4);
  color: #111;
  background: rgba(255,255,255,0.2);
  cursor: pointer;
  transition: transform 0.12s ease, box-shadow 0.12s ease, background-color 0.12s ease, filter 0.12s ease, opacity 0.12s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  position: relative;
}
.key-badge:hover { transform: translateY(-1px); box-shadow: 0 2px 8px rgba(0,0,0,0.35), 0 0 12px var(--kb-glow, rgba(255,255,255,0.45)); }
.key-Common { background: rgba(204, 204, 204, 0.7); }
.key-Rare { background: rgba(74, 144, 226, 0.7); }
.key-Epic { background: rgba(155, 89, 182, 0.7); }
.key-Legendary { background: rgba(241, 196, 15, 0.8); }
.key-Mythisch { background: rgba(231, 76, 60, 0.8); }

.key-badge.disabled {
  cursor: not-allowed;
  opacity: 0.55;
  filter: grayscale(70%);
}
.key-badge.disabled:hover {
  transform: none;
  box-shadow: none;
}

/* Bis zum ersten Fund: Schlüsselbild komplett schwarz anzeigen */
.key-badge.unknown .kb-icon-wrap img {
  filter: brightness(0);
}

/* Schlüsselbild + kleiner Counter in den Badges */
.kb-icon-wrap {
  position: relative;
  width: 22px;
  height: 22px;
  border: 2px solid #777;
  border-radius: 6px;
  background: rgba(255,255,255,0.08);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.kb-icon-wrap img { width: 16px; height: 16px; object-fit: contain; }
.kb-count {
  position: absolute;
  bottom: -7px;
  right: -7px;
  background: #f1c40f;
  color: #111;
  border: 2px solid #7d5e00;
  border-radius: 999px;
  min-width: 14px;
  padding: 0 4px;
  font-weight: 700;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
}

/* Box Selection Wrapper mit Icon-Buttons */
#boxSelectionWrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-top: 16px; /* Abstand zum Lootfenster */
  margin-bottom: 10px;
}

#boxSelection {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  justify-content: center; /* grid selbst bleibt mittig im Wrapper */
  justify-items: center;   /* Buttons zentriert in ihren Zellen */
  width: 100%;
  max-width: 612px;        /* erneut ~10% schmaler */
  margin: 0 auto;          /* zentriert das Grid innerhalb des Wrappers */
}

/* Box 7 soll die ganze letzte Zeile einnehmen und zentriert sein */
#boxBtn7 {
  grid-column: 2;          /* eigene Zeile, mittlere Spalte */
  justify-self: center;
}

#boxSelection button {
  font-size: 18px;
  padding: 10px 16px;
  font-weight: bold;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-color: #3a3a3a; /* Fallback-Farbe */
  border: 2px solid #666;
  border-radius: 8px;
  color: white;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
  position: relative;
  min-width: 0;
  width: 100%;            /* alle Buttons gleiche Breite je Spalte */
  height: 84px;           /* feste Höhe für identische Größe */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center; /* vertikal mittig ausrichten */
  gap: 2px;
  text-align: center;
  line-height: 1.15;
}

/* Individuelle Hintergrundbilder für jede Box */
#boxBtn1 { 
  background-image: linear-gradient(135deg, #6b4423 0%, #3d2817 100%);
  /* Holzkiste - braune Holztöne */
}
#boxBtn2 { 
  background-image: linear-gradient(135deg, #8b7355 0%, #5c4a3a 100%);
  /* Sporttasche */
}
#boxBtn3 { 
  background-image: linear-gradient(135deg, #a8a8a8 0%, #6e6e6e 100%);
  /* Koffer - Silber */
}
/* Zweizeilige Labels in den Box-Buttons: Preiszeile etwas kleiner */
#boxSelection button small {
  display: block;
  font-size: 0.85em;
  font-weight: 600;
  opacity: 0.95;
  margin-top: 2px;
}
#boxBtn4 { 
  background-image: linear-gradient(135deg, #ffd700 0%, #b8860b 100%);
  /* Militärkoffer - Gold */
}
#boxBtn5 { 
  background-image: linear-gradient(135deg, #ff8c00 0%, #ff4500 100%);
  box-shadow: 0 0 15px rgba(255, 140, 0, 0.4);
  /* Aluminiumkoffer - Orange-Rot */
}
#boxBtn6 { 
  background-image: linear-gradient(135deg, #ff00ff 0%, #8b008b 100%);
  box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
  /* Safe - Pink-Violett */
}
#boxBtn7 { 
  background-image: linear-gradient(135deg, #ff1493 0%, #ff6347 100%);
  box-shadow: 0 0 25px rgba(255, 20, 147, 0.6);
  animation: mythicGlow 2s ease-in-out infinite;
  /* Tresor - Pink-Rot mit Animation */
}

@keyframes mythicGlow {
  0%, 100% { box-shadow: 0 0 25px rgba(255, 20, 147, 0.6); }
  50% { box-shadow: 0 0 35px rgba(255, 20, 147, 0.9); }
}

#iconButtons {
  display: flex;
  gap: 10px;
  justify-content: center;
}

/* Leaderboard Tabs row */
.lb-tabs { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.lb-tab { 
  background: rgba(255,255,255,0.06);
  border: 1px solid #666;
  color: #fff;
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
}
.lb-tab.active { background: rgba(46,204,113,0.15); border-color: #2ecc71; }

#devToggleWrapper {
  display: none; /* hide visible dev checkbox wrapper */
}

.toggle-dev {
  user-select: none;
  color: #bbb;
  font-size: 14px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.toggle-dev input[type="checkbox"] {
  transform: scale(1.1);
}

/* Secret DEV switch in title */
.secret-dev-switch {
  display: inline-block;
  position: relative;
  line-height: 1;
}
.secret-dev-switch:focus {
  outline: none;
}
.secret-dev-switch.dev-on::after {
  content: '✔';
  position: absolute;
  right: -0.35em;
  bottom: -0.25em;
  font-size: 0.6em;
  color: #2ecc71;
  text-shadow: 0 0 4px rgba(46,204,113,0.8);
  pointer-events: none;
}

#collectionBtn, #statsBtn, #achievementsBtn, #leaderboardBtn {
  font-size: 24px;
  padding: 10px 15px;
  cursor: pointer;
  background: rgba(255,255,255,0.02);
  border: 2px solid #666;
  color: white;
  border-radius: 8px;
  transition: all 0.2s ease;
  min-width: 50px;
}

#collectionBtn:hover, #statsBtn:hover, #achievementsBtn:hover, #leaderboardBtn:hover {
  background: rgba(255,255,255,0.08);
  border-color: #888;
  transform: scale(1.05);
}

#devMoneyBtn {
  font-size: 24px;
  padding: 10px 15px;
  cursor: pointer;
  background: rgba(0,255,0,0.1);
  border: 2px solid rgba(0,255,0,0.3);
  color: #0f0;
  border-radius: 8px;
  transition: all 0.2s ease;
  min-width: 50px;
  font-weight: bold;
}

#devMoneyBtn:hover {
  background: rgba(0,255,0,0.2);
  border-color: rgba(0,255,0,0.5);
  transform: scale(1.05);
}

/* Gesperrte Box-Buttons (Progression-System) */
#boxSelection button.locked {
  background: repeating-linear-gradient(
    45deg,
    #444 0px,
    #444 10px,
    #333 10px,
    #333 20px
  );
  color: #888;
  cursor: not-allowed;
  border: 2px solid #555;
  position: relative;
}

#boxSelection button.locked:hover {
  background: repeating-linear-gradient(
    45deg,
    #444 0px,
    #444 10px,
    #333 10px,
    #333 20px
  );
}

/* Freigeschaltete Boxen - Standard verblasst */
#boxSelection button:not(.locked):not(.affordable) {
  opacity: 0.5;
}

/* Freigeschaltete Box die sich der Spieler leisten kann - volle Helligkeit */
#boxSelection button.affordable {
  opacity: 1;
}

#boxSelection button.selected {
  border: 3px solid #2ecc71;
  box-shadow: 0 0 15px rgba(46, 204, 113, 0.6);
}

/* Temporär deaktivierte Auswahl während des Öffnens */
#boxSelection button:disabled,
#boxSelection button.temp-disabled {
  pointer-events: none;
  opacity: 0.6;
}

.info-modal {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  background: rgba(0, 0, 0, 0.35) !important;
  align-items: center !important;
  justify-content: center !important;
  z-index: 5100 !important;
  margin: 0 !important;
  padding: 0 !important;
}

.info-modal[style*="display: block"],
.info-modal[style*="display:block"] {
  display: flex !important;
}

.info-content { 
  position: relative !important;
  background: rgba(10,10,10,0.98) !important;
  border: 1px solid #444 !important;
  padding: 20px !important;
  color: white !important;
  width: 500px !important;
  max-width: 90vw !important;
  max-height: 80vh !important;
  overflow-y: auto !important;
  box-shadow: 0 8px 24px rgba(0,0,0,0.7) !important;
  border-radius: 8px !important;
}

/* Make the keys modal a bit wider so icons and buttons fit nicely */
#keysModal .info-content {
  width: 820px !important;
  max-width: 95vw !important;
}

.info-content h3 {
  margin: 0 0 16px 0;
  text-align: center;
  font-size: 20px;
}

.info-close { 
  position: absolute; 
  right: 12px; 
  top: 12px; 
  background: transparent; 
  border: none; 
  color: #aaa; 
  font-size: 20px; 
  cursor: pointer;
  line-height: 1;
  padding: 4px;
}

.info-close:hover {
  color: #fff;
}
.info-header { margin-bottom: 8px; text-align: left; }
.info-table { width: 100%; border-collapse: collapse; text-align: left; }
.info-table th, .info-table td { padding: 6px 8px; border-bottom: 1px solid #222; }
.info-table .rarity-name { font-weight: 600; }

.skill-bonus-info {
  background: rgba(155, 89, 182, 0.2);
  border: 2px solid rgba(155, 89, 182, 0.5);
  border-radius: 8px;
  padding: 12px;
  margin: 10px 0;
  text-align: left;
  font-size: 14px;
  line-height: 1.6;
}

.skill-bonus-info strong {
  color: #9b59b6;
  font-size: 16px;
}

/* ======= Level & XP System ======= */
#levelDisplay {
  background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
  padding: 15px 20px;
  margin: 10px auto 20px;
  border-radius: 12px;
  max-width: 600px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

#levelInfo {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

#levelLeft {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

#playerLevel {
  font-size: 24px;
  font-weight: bold;
  color: #f39c12;
}

#playerTitle {
  font-size: 18px;
  color: #ecf0f1;
  font-style: italic;
}

#xpBarContainer {
  position: relative;
  width: 100%;
  height: 30px;
  background: #34495e;
  border-radius: 15px;
  overflow: hidden;
  margin-bottom: 10px;
  border: 2px solid #2c3e50;
}

#xpBar {
  height: 100%;
  background: linear-gradient(90deg, #3498db 0%, #2ecc71 100%);
  transition: width 0.5s ease;
  border-radius: 15px;
}

#xpText {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-weight: bold;
  color: white;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  font-size: 14px;
}

#skillsBtn {
  background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  transition: all 0.3s ease;
  box-shadow: 0 3px 10px rgba(155, 89, 182, 0.3);
}

#skillsBtn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(155, 89, 182, 0.5);
}

#skillsBtn.has-points {
  animation: pulse-glow 1.5s infinite;
}

/* Prestige UI */
#prestigeModal .prestige-conds {
  list-style: none;
  padding-left: 0;
  margin: 8px 0 12px 0;
}
#prestigeModal .prestige-conds li {
  font-size: 14px;
  line-height: 1.6;
}
#prestigeModal .prestige-conds li.ok {
  color: #2ecc71; /* grün */
  font-weight: 700;
}
#prestigeModal .prestige-conds li.fail {
  color: #e74c3c; /* rot */
}
.prestige-star {
  position: relative;
  width: 34px;
  height: 34px;
  display: inline-block;
}
.prestige-star .star {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 30px;
  filter: drop-shadow(0 0 4px rgba(241,196,15,0.6));
}
.prestige-star .num {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -56%);
  font-size: 13px;
  font-weight: 800;
  color: #1b1203;
  text-shadow: 0 1px 2px rgba(255,255,255,0.6);
}
#prestigeBtn {
  background: linear-gradient(135deg, #f1c40f 0%, #e67e22 100%);
  color: #1b1203;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  transition: all 0.3s ease;
  box-shadow: 0 3px 10px rgba(241, 196, 15, 0.35);
}
#prestigeBtn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(241, 196, 15, 0.55);
}
#prestigeBtn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

/* Glow when prestige is possible */
#prestigeBtn.prestige-ready {
  animation: prestigeGlow 1.4s ease-in-out infinite;
  box-shadow: 0 0 12px rgba(241,196,15,0.55), 0 0 24px rgba(241,196,15,0.35);
  transform: translateY(-1px);
}
#prestigeBtn.prestige-ready .prestige-star .star {
  filter: drop-shadow(0 0 10px rgba(241,196,15,0.95));
}

@keyframes prestigeGlow {
  0%, 100% { box-shadow: 0 0 10px rgba(241,196,15,0.45), 0 0 20px rgba(241,196,15,0.25); }
  50% { box-shadow: 0 0 22px rgba(241,196,15,0.95), 0 0 34px rgba(243,156,18,0.65); }
}
.prestige-badge {
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.15);
  color: #f1c40f;
  font-weight: 700;
  padding: 8px 12px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 3px 10px rgba(155, 89, 182, 0.3); }
  50% { box-shadow: 0 5px 25px rgba(241, 196, 15, 0.8); }
}


/* Skill Modal Overlay: zentriert wie Sammlung/Stats */
#skillModal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: transparent;
  color: white;
  overflow-y: auto;
  padding: 0;
  z-index: 5000;
  display: none;
}

/* Shop Modal Overlay: identisch aufgebaut wie Skill-Overlay */
#shopModal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: transparent;
  color: white;
  overflow-y: auto;
  padding: 0;
  z-index: 5000;
  display: none;
}

/* Prestige Modal Overlay: identisch aufgebaut wie Skill/Shop */
#prestigeModal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: transparent;
  color: white;
  overflow-y: auto;
  padding: 0;
  z-index: 5000;
  display: none;
}

/* Shop Root-Container: Standard-Block, Sektionen stehen untereinander */
/* (keine speziellen Layoutregeln nötig) */

/* Shop Sections – angeordnet wie die Sammlung */
.shop-section {
  width: 100%;
  margin-bottom: 24px;
}
.shop-section h3 {
  font-size: 18px;
  margin-bottom: 10px;
  border-bottom: 1px solid #555;
  padding-bottom: 5px;
  text-align: left;
  color: white;
}
.shop-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 12px;
  justify-items: stretch;
}
.shop-section .skill-branch {
  text-align: left;
}

.skill-modal {
  background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
  padding: 30px;
  border-radius: 15px;
  max-width: 700px;
  margin: 50px auto;
  box-shadow: 0 10px 50px rgba(0,0,0,0.5);
  position: relative;
}

.skill-modal .close-btn {
  position: absolute;
  top: 15px;
  right: 15px;
  background: transparent;
  border: none;
  font-size: 24px;
  cursor: pointer;
  padding: 5px;
  line-height: 1;
  opacity: 0.7;
  transition: opacity 0.2s;
}

.skill-modal .close-btn:hover {
  opacity: 1;
}

.skill-modal h2 {
  color: #f39c12;
  margin-bottom: 20px;
  font-size: 32px;
}

.skill-points {
  font-size: 20px;
  margin-bottom: 30px;
  color: #ecf0f1;
}

.skill-tree {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.skill-branch {
  background: rgba(255,255,255,0.05);
  padding: 20px;
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,0.1);
  transition: all 0.3s ease;
}

.skill-branch:hover {
  border-color: rgba(255,255,255,0.3);
  transform: translateY(-5px);
}

.skill-branch h3 {
  font-size: 24px;
  margin-bottom: 10px;
}

.skill-description {
  font-size: 14px;
  color: #bdc3c7;
  margin-bottom: 15px;
  min-height: 40px;
}

.skill-level {
  font-size: 20px;
  font-weight: bold;
  margin-bottom: 15px;
  color: #3498db;
}

.upgrade-btn {
  background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  width: 100%;
  transition: all 0.3s ease;
}

/* Preis direkt im Button */
.upgrade-btn .price {
  margin-left: 8px;
  color: #f1c40f; /* Gold/Geld-Farbe */
}
.upgrade-btn .price.unaffordable {
  color: #e74c3c; /* Rot bei zu wenig Geld */
}

.upgrade-btn:hover:not(:disabled) {
  transform: scale(1.05);
  box-shadow: 0 5px 15px rgba(39, 174, 96, 0.5);
}

/* Stärkerer Glow für bezahlbare Buttons */
.upgrade-btn.affordable:hover:not(:disabled) {
  box-shadow: 0 0 16px rgba(39, 174, 96, 0.65), 0 0 32px rgba(39, 174, 96, 0.35);
}

.upgrade-btn:disabled {
  background: #555;
  cursor: not-allowed;
  opacity: 0.5;
}

/* Level Up Notification */
.level-up-notification {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
  padding: 40px 60px;
  border-radius: 20px;
  box-shadow: 0 10px 50px rgba(0,0,0,0.7);
  z-index: 10000;
  animation: levelUpAppear 0.5s ease;
  text-align: center;
}

@keyframes levelUpAppear {
  0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
  100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

.level-up-notification.fade-out {
  animation: levelUpFadeOut 0.5s ease forwards;
}

@keyframes levelUpFadeOut {
  to { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
}

.level-up-content h2 {
  font-size: 48px;
  margin-bottom: 15px;
  color: white;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
}

.level-up-content p {
  font-size: 24px;
  color: white;
  margin: 10px 0;
}

.level-up-title {
  font-weight: bold;
  color: #ecf0f1;
}

.level-up-skill {
  color: #2ecc71;
  font-weight: bold;
}

/* Money Earned Effect */
.money-earned-effect {
  position: fixed;
  font-size: 32px;
  font-weight: bold;
  color: #2ecc71;
  pointer-events: none;
  z-index: 9999;
  text-shadow: 0 0 10px rgba(46, 204, 113, 0.8),
               0 0 20px rgba(46, 204, 113, 0.6);
  animation: moneyRise 2s ease-out forwards;
  transform: translateX(-50%);
}

@keyframes moneyRise {
  0% {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(-100px);
  }
}

/* Key Found Effect (gelb, ähnlich Kontostand-Animation) */
.key-found-effect {
  position: fixed;
  font-size: 28px;
  font-weight: bold;
  color: #f1c40f;
  pointer-events: none;
  z-index: 9999;
  text-shadow: 0 0 10px rgba(241, 196, 15, 0.9),
               0 0 20px rgba(241, 196, 15, 0.7);
  animation: moneyRise 2s ease-out forwards;
  transform: translateX(-50%);
}

/* Glow-Animation für Schlüssel-Badge */
@keyframes keyBadgeGlowPulse {
  0% { box-shadow: 0 0 0 rgba(241,196,15,0); transform: scale(1.0); }
  30% { box-shadow: 0 0 14px rgba(241,196,15,0.9), 0 0 26px rgba(241,196,15,0.5); transform: scale(1.08); }
  100% { box-shadow: 0 0 0 rgba(241,196,15,0); transform: scale(1.0); }
}
.key-badge-glow {
  animation: keyBadgeGlowPulse 900ms ease-out;
}

/* Schlüssel-Modal: Key → Door Layout */
#keysModal .keys-row {
  display: grid;
  grid-template-columns: 200px 40px 1fr auto; /* Key | Arrow | Door | Actions */
  align-items: center;
  gap: 12px;
  border: 1px solid #333;
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 8px;
  min-height: 72px; /* a bit taller so icon + counter sit nicely */
}
#keysModal .key-cell {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 200px; /* fixed to align arrow/door columns across rows */
  overflow: hidden;
}
#keysModal .key-icon-wrap {
  position: relative;
  width: 56px;
  height: 56px;
  border: 2px solid #777;
  border-radius: 8px;
  background: rgba(255,255,255,0.03);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
#keysModal .key-icon-wrap img {
  width: 44px;
  height: 44px;
  object-fit: contain;
}
#keysModal .key-counter-badge {
  position: absolute;
  bottom: -4px;
  right: -6px;
  background: #f1c40f;
  color: #111;
  border: 2px solid #7d5e00;
  border-radius: 999px;
  min-width: 20px;
  padding: 2px 6px;
  font-weight: 700;
  font-size: 12px;
  line-height: 1;
  text-align: center;
}
#keysModal .key-rarity-label { font-weight: 700; }
#keysModal .arrow-cell {
  font-size: 28px;
  opacity: 0.9;
  text-align: center;
  width: 40px; /* matches grid column */
}
#keysModal .door-cell {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 160px;
}
#keysModal .door-emoji {
  font-size: 36px;
  width: 36px;
  flex: 0 0 36px; /* align emojis vertically */
  text-align: center;
}
#keysModal .door-label { opacity: 0.9; }
#keysModal .key-actions {
  justify-self: end;
  display: inline-flex;
  gap: 8px;
}
#keysModal .key-actions .box-info-btn {
  font-size: 16px;
  padding: 6px 10px;
  min-width: auto;
}

/* ======= Rarity Reveal Flare (Legendary & Mythisch) ======= */
#lootContainer .item .rarity-flare {
  position: absolute;
  inset: -6px;
  border-radius: 10px;
  pointer-events: none;
  z-index: 2053;
  overflow: hidden;
}

@keyframes ringPulse {
  0% { transform: scale(0.85); opacity: 0.0; }
  20% { opacity: 0.9; }
  60% { transform: scale(1.1); opacity: 0.7; }
  100% { transform: scale(1.0); opacity: 0.0; }
}

@keyframes diagonalShine {
  0% { transform: translateX(-120%) translateY(-120%) rotate(25deg); opacity: 0; }
  20% { opacity: 0.6; }
  100% { transform: translateX(120%) translateY(120%) rotate(25deg); opacity: 0; }
}

#lootContainer .item .legendary-flare::before,
#lootContainer .item .mythic-flare::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow: inset 0 0 12px rgba(255,255,255,0.35), 0 0 24px rgba(255,255,255,0.25);
  animation: ringPulse 1.2s ease-out forwards;
}

#lootContainer .item .legendary-flare::after,
#lootContainer .item .mythic-flare::after {
  content: '';
  position: absolute;
  width: 200%;
  height: 200%;
  top: -50%;
  left: -50%;
  background: linear-gradient(25deg, transparent 40%, rgba(255,255,255,0.75) 50%, transparent 60%);
  animation: diagonalShine 0.9s ease-out forwards;
}

#lootContainer .item .legendary-flare {
  background: radial-gradient(ellipse at center, rgba(241,196,15,0.25) 0%, rgba(241,196,15,0.05) 60%, transparent 80%);
  border: 2px solid rgba(241,196,15,0.6);
  box-shadow: 0 0 30px rgba(241,196,15,0.35);
}

#lootContainer .item .mythic-flare {
  background: radial-gradient(ellipse at center, rgba(231,76,60,0.25) 0%, rgba(231,76,60,0.05) 60%, transparent 80%);
  border: 2px solid rgba(231,76,60,0.6);
  box-shadow: 0 0 34px rgba(231,76,60,0.38);
}

/* Dramatic screen vignette for Mythisch */
.screen-vignette {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 10001;
  background: radial-gradient(circle at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0.15) 50%, rgba(0,0,0,0.45) 100%);
  animation: vignetteFade 0.9s ease-out forwards;
}

@keyframes vignetteFade {
  0% { opacity: 0; }
  20% { opacity: 1; }
  100% { opacity: 0; }
}

/* Update-Info Banner (neue Version verfügbar) */
#updateBanner {
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  z-index: 3000;
  background: rgba(20, 20, 20, 0.96);
  color: #fff;
  border: 1px solid #444;
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.45), 0 0 0 1px rgba(255,255,255,0.04) inset;
  padding: 10px 12px;
  display: none;
}

#updateBanner .ub-inner {
  display: flex;
  align-items: center;
  gap: 12px;
}

#updateBanner .ub-text {
  font-size: 14px;
}

#updateBanner .ub-reload {
  background: #2ecc71;
  border: 1px solid #27ae60;
  color: #0b1d0f;
  font-weight: 700;
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
}

#updateBanner .ub-reload:hover {
  background: #31d778;
}

/* Sound Control */
#soundControl {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 2000;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
}

.sound-btn {
  background: rgba(30, 30, 30, 0.9);
  border: 2px solid #444;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  font-size: 24px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}

.sound-btn:hover {
  background: rgba(50, 50, 50, 0.95);
  border-color: #666;
  transform: scale(1.05);
}

.sound-btn.muted {
  opacity: 0.5;
  border-color: #ff4444;
}

.sound-btn.muted::after {
  content: '';
  position: absolute;
  width: 2px;
  height: 40px;
  background: #ff4444;
  transform: rotate(45deg);
}

.volume-slider {
  background: rgba(30, 30, 30, 0.95);
  border: 2px solid #444;
  border-radius: 12px;
  padding: 12px 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-width: 200px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
}

#volumeRange {
  width: 100%;
  cursor: pointer;
  -webkit-appearance: none;
  appearance: none;
  height: 6px;
  border-radius: 3px;
  background: linear-gradient(to right, #666 0%, #666 50%, #333 50%, #333 100%);
  outline: none;
}

#volumeRange::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #4CAF50;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  transition: all 0.2s ease;
}

#volumeRange::-webkit-slider-thumb:hover {
  background: #5bc75f;
  transform: scale(1.1);
}

#volumeRange::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #4CAF50;
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  transition: all 0.2s ease;
}

#volumeRange::-moz-range-thumb:hover {
  background: #5bc75f;
  transform: scale(1.1);
}

#volumePercent {
  text-align: center;
  font-size: 14px;
  color: #aaa;
  font-weight: 600;
}

/* ======= Responsive Layout ======= */
@media (max-width: 1024px) {
  #levelDisplay { max-width: 720px; }
}

@media (max-width: 768px) {
  #playRow { flex-direction: column; align-items: center; gap: 12px; }
  #openBtn { font-size: 20px; padding: 12px 28px; }
  #openBtn .open-btn-icon { font-size: 18px; }
  #openBtn .open-btn-icon img { width: 18px; height: 18px; }
  #shopBtn { font-size: 16px; padding: 8px 18px; }

  #boxSelection { grid-template-columns: repeat(2, 1fr); max-width: 420px; }
  #boxBtn7 { grid-column: 1 / span 2; justify-self: center; }
  #boxSelection button { height: 72px; font-size: 16px; }
  #boxSelection button small { font-size: 0.8em; }

  #iconButtons { gap: 8px; }
  #iconButtons button { font-size: 20px; padding: 8px 12px; }

  #levelDisplay { max-width: 92vw; padding: 12px 16px; }
  #playerLevel { font-size: 20px; }
  #playerTitle { font-size: 16px; }
  #xpBarContainer { height: 24px; }
  #xpText { font-size: 12px; }

  .skill-modal { max-width: 92vw; padding: 20px; }
  .skill-modal h2 { font-size: 26px; }

  .info-content { width: 92vw !important; }

  #soundControl { top: 12px; right: 12px; }
  .sound-btn { width: 44px; height: 44px; font-size: 22px; }
  .volume-slider { min-width: 180px; }

  /* Overlays a bit tighter */
  #collectionOverlay, #statsOverlay, #achievementsOverlay {
    top: 5%; left: 5%; width: 90%; height: 90%;
  }

  /* Keys modal compaction */
  #keysModal .keys-row { grid-template-columns: 160px 32px 1fr auto; }
  #keysModal .key-icon-wrap { width: 48px; height: 48px; }
  #keysModal .key-icon-wrap img { width: 38px; height: 38px; }
  #keysModal .door-emoji { font-size: 30px; width: 30px; flex: 0 0 30px; }

  .lb-tab { padding: 6px 10px; font-size: 14px; }
}

@media (max-width: 480px) {
  /* Zwei Spalten oben (Shop/Keys), darunter der Öffnen-Button über volle Breite */
  #actionButtons {
    grid-template-columns: 1fr 1fr;
    grid-template-areas:
      "left keys"
      "open open";
    gap: 8px;
  }
  #leftActions { grid-area: left; justify-self: center; }
  #keysBtn { grid-area: keys; justify-self: center; }
  #openBtn { grid-area: open; width: 100%; }

  .quickslot-btn { width: 32px; height: 32px; }
  .quickslot-btn .potion-icon { width: 22px; height: 22px; }

  #boxSelection { max-width: 360px; }
  #boxSelection button { height: 64px; font-size: 15px; }

  .sound-btn { width: 40px; height: 40px; font-size: 20px; }
  .volume-slider { min-width: 160px; }

  .lb-tab { font-size: 13px; }
}

/* (entfernt) Scroll-Hinweis fürs Leaderboard war vorhanden, wurde auf Wunsch entfernt */
